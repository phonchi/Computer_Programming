<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.306">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="phonchi">
<meta name="dcterms.date" content="2023-03-31">

<title>Computer Programming - 8&nbsp; Files and Exceptions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./08_09_OOP.html" rel="next">
<link href="./06_Manipulating_string.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./07_Files.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Files and Exceptions</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Computer Programming</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Book</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_Python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Python Basics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_Flow_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Flow Control</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_Function.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_Lists_tuples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Lists and Tuples</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_Dictionaries_sets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Other collections - Dictionaries and Sets</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_Manipulating_string.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulating Strings</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_Files.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Files and Exceptions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_09_OOP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Object Oriented Programming and Classes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_11_NumPy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Array-Oriented Programming with NumPy</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_Copilot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Increase productivity and learning with Github Copilot in Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_Algorithms_sol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Algorithms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_Data_Structure_sol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Data Structure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_Abstract_data_types_sol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Abstract Data Types</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#reading-from-a-file" id="toc-reading-from-a-file" class="nav-link active" data-scroll-target="#reading-from-a-file"><span class="header-section-number">8.1</span> Reading from a File</a>
  <ul>
  <li><a href="#reading-the-contents-of-a-file" id="toc-reading-the-contents-of-a-file" class="nav-link" data-scroll-target="#reading-the-contents-of-a-file"><span class="header-section-number">8.1.1</span> Reading the Contents of a File</a></li>
  <li><a href="#file-paths" id="toc-file-paths" class="nav-link" data-scroll-target="#file-paths"><span class="header-section-number">8.1.2</span> File Paths</a></li>
  <li><a href="#reading-line-by-line" id="toc-reading-line-by-line" class="nav-link" data-scroll-target="#reading-line-by-line"><span class="header-section-number">8.1.3</span> Reading Line by Line</a></li>
  <li><a href="#making-a-list-of-lines-from-a-file" id="toc-making-a-list-of-lines-from-a-file" class="nav-link" data-scroll-target="#making-a-list-of-lines-from-a-file"><span class="header-section-number">8.1.4</span> Making a List of Lines from a File</a></li>
  <li><a href="#writing-to-a-file" id="toc-writing-to-a-file" class="nav-link" data-scroll-target="#writing-to-a-file"><span class="header-section-number">8.1.5</span> Writing to a File</a>
  <ul class="collapse">
  <li><a href="#writing-to-an-empty-file" id="toc-writing-to-an-empty-file" class="nav-link" data-scroll-target="#writing-to-an-empty-file"><span class="header-section-number">8.1.5.1</span> Writing to an Empty File</a></li>
  </ul></li>
  <li><a href="#appending-to-a-file" id="toc-appending-to-a-file" class="nav-link" data-scroll-target="#appending-to-a-file"><span class="header-section-number">8.1.6</span> Appending to a File</a></li>
  </ul></li>
  <li><a href="#storing-data" id="toc-storing-data" class="nav-link" data-scroll-target="#storing-data"><span class="header-section-number">8.2</span> Storing Data</a>
  <ul>
  <li><a href="#using-json.dump-and-json.load" id="toc-using-json.dump-and-json.load" class="nav-link" data-scroll-target="#using-json.dump-and-json.load"><span class="header-section-number">8.2.0.1</span> Using <code>json.dump()</code> and <code>json.load()</code></a></li>
  </ul></li>
  <li><a href="#exceptions" id="toc-exceptions" class="nav-link" data-scroll-target="#exceptions"><span class="header-section-number">8.3</span> Exceptions</a>
  <ul>
  <li><a href="#handling-the-zerodivisionerror-exception" id="toc-handling-the-zerodivisionerror-exception" class="nav-link" data-scroll-target="#handling-the-zerodivisionerror-exception"><span class="header-section-number">8.3.1</span> Handling the <code>ZeroDivisionError</code> Exception</a></li>
  <li><a href="#using-exceptions-to-prevent-crashes" id="toc-using-exceptions-to-prevent-crashes" class="nav-link" data-scroll-target="#using-exceptions-to-prevent-crashes"><span class="header-section-number">8.3.2</span> Using Exceptions to Prevent Crashes</a></li>
  <li><a href="#handling-the-filenotfounderror-exception" id="toc-handling-the-filenotfounderror-exception" class="nav-link" data-scroll-target="#handling-the-filenotfounderror-exception"><span class="header-section-number">8.3.3</span> Handling the <code>FileNotFoundError</code> Exception</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Files and Exceptions</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>phonchi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 31, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>


<table align="left">
<tbody><tr><td>
<a href="https://colab.research.google.com/github/phonchi/nsysu-math106A/blob/master/static_files/presentations/07_Files.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a>
</td>
<td>
<a target="_blank" href="https://kaggle.com/kernels/welcome?src=https://github.com/phonchi/nsysu-math106A/blob/master/static_files/presentations/07_Files.ipynb"><img src="https://kaggle.com/static/images/open-in-kaggle.svg"></a>
</td>

</tr></tbody></table>
<p><br></p>
<section id="reading-from-a-file" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="reading-from-a-file"><span class="header-section-number">8.1</span> Reading from a File</h2>
<p>Now that you’ve mastered the basic skills you need to write organized programs that are easy to use, it’s time to think about making your programs even more relevant and usable.</p>
<p>An incredible amount of data is available in text files. Text files can contain weather data, traffic data, socioeconomic data, literary works, and more. Reading from a file is particularly useful in data analysis applications, but it’s also applicable to any situation in which you want to analyze or modify information stored in a file.</p>
<section id="reading-the-contents-of-a-file" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="reading-the-contents-of-a-file"><span class="header-section-number">8.1.1</span> Reading the Contents of a File</h3>
<p>To begin, we need a file with a few lines of text in it. Let’s start with a file that contains <code>pi</code> to 30 decimal places:</p>
<div class="cell" data-executioninfo="{&quot;elapsed&quot;:4,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1668686223113,&quot;user&quot;:{&quot;displayName&quot;:&quot;phonchi chung&quot;,&quot;userId&quot;:&quot;13517391734500420886&quot;},&quot;user_tz&quot;:-480}" data-outputid="6fac1a14-1607-409b-c6f1-0b05188f6e2c">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">%%</span>writefile pi_digits.txt</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fl">3.1415926535</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="dv">8979323846</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dv">2643383279</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s a program that opens this file, reads it, and prints the contents of the file to the screen:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>file_object <span class="op">=</span> <span class="bu">open</span>(<span class="st">'pi_digits.txt'</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="bu">print</span>(file_object.read())</span>
<span id="cb2-3"><a href="#cb2-3"></a>file_object.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.1415926535
  8979323846
  2643383279
</code></pre>
</div>
</div>
<p>To do any work with a file, even just printing its contents, you first need to open the file to access it. The <code>open()</code> function needs one argument: the name of the file you want to open. Python looks for this file in the directory where the program that’s currently being executed is stored. The <code>open()</code> function returns an object representing the file. Here, <code>open('pi_digits.txt')</code> returns an object representing <code>pi_digits.txt</code>. Python assigns this object to <code>file_object</code>, which we’ll work with later in the program.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># A recommended way:</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'pi_digits.txt'</span>) <span class="im">as</span> file_object: <span class="co">#  file_object = open('pi_digits.txt')</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>    contents <span class="op">=</span> file_object.read()          <span class="co">#  We do not have to call file_object.close()</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="bu">print</span>(contents.strip())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.1415926535
  8979323846
  2643383279</code></pre>
</div>
</div>
<p>The keyword <code>with</code> closes the file once access to it is no longer needed. Notice how we call <code>open()</code> in this program but not <code>close()</code>. You could open and close the file by calling <code>open()</code> and <code>close()</code>, but if a bug in your program prevents the <code>close()</code> method from being executed, the file may never close! This may seem trivial, but improperly closed files can cause data to be lost or corrupted.</p>
<p>Once we have a file object representing <code>pi_digits.txt</code>, we use the <code>read()</code> method in the second line of our program to read the entire contents of the file and store it as one long string in <code>contents</code>. Since <code>read()</code> returns an empty string when it reaches the end of the file; this empty string shows up as a blank line. If you want to remove the extra blank line, you can use <code>strip()</code> in the call to <code>print()</code>.</p>
<blockquote class="blockquote">
<p>It’s not always easy to know exactly when you should close a file, but with the structure shown here, Python will figure that out for you. All you have to do is open the file and work with it as desired, trusting that Python will close it automatically when the <code>with</code> block finishes execution.</p>
</blockquote>
</section>
<section id="file-paths" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="file-paths"><span class="header-section-number">8.1.2</span> File Paths</h3>
<p>Sometimes, depending on how you organize your work, the file you want to open won’t be in the same directory as your program file. To get Python to open files from a directory other than the one where your program file is stored, you need to provide a file path , which tells Python to look in a specific location on your system. A <strong><em>relative file path</em></strong> will tell Python to look for a given location relative to the directory where the currently running program file is stored. For example, you’d write:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'text_files/filename.txt'</span>) <span class="im">as</span> file_object:</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This line tells Python to look for the desired .txt file in the folder <code>text_files</code> and assumes that <code>text_files</code> is located in the current directory.</p>
<blockquote class="blockquote">
<p>Windows systems use a backslash (<code>\</code>) instead of a forward slash (<code>/</code>) when displaying file paths, but you can still use forward slashes in your code.</p>
</blockquote>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="op">!</span>mkdir text_files</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="op">%%</span>writefile text_files<span class="op">/</span>pi_digits2.txt</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fl">3.1415926535</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="dv">8979323846</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="dv">2643383279</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Writing text_files/pi_digits2.txt</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'text_files/pi_digits2.txt'</span>) <span class="im">as</span> file_object:</span>
<span id="cb10-2"><a href="#cb10-2"></a>    contents <span class="op">=</span> file_object.read()</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="bu">print</span>(contents.strip())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.1415926535
  8979323846
  2643383279</code></pre>
</div>
</div>
<p>You can also tell Python exactly where the file is on your computer regardless of where the program that’s being executed is stored. This is called an <strong><em>absolute file path</em></strong>. Absolute paths are usually longer than relative paths, so it’s helpful to assign them to a variable and then pass that variable to <code>open()</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>file_path <span class="op">=</span> <span class="st">'/home/phonchi/other_files/text_files/filename.txt'</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="cf">with</span> <span class="bu">open</span>(file_path) <span class="im">as</span> file_object:</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="reading-line-by-line" class="level3" data-number="8.1.3">
<h3 data-number="8.1.3" class="anchored" data-anchor-id="reading-line-by-line"><span class="header-section-number">8.1.3</span> Reading Line by Line</h3>
<p>When you’re reading a file, you’ll often want to examine each line of the file. You might be looking for certain information in the file, or you might want to modify the text in the file in some way. You can use a <code>for</code> loop on the file object to examine each line from a file one at a time:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>filename <span class="op">=</span> <span class="st">'pi_digits.txt'</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> file_object: <span class="co"># file_object is also iterable!</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="cf">for</span> line <span class="kw">in</span> file_object:</span>
<span id="cb13-4"><a href="#cb13-4"></a>        <span class="bu">print</span>(line.strip())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.1415926535
8979323846
2643383279</code></pre>
</div>
</div>
<p>To examine the file’s contents, we work through each line in the file by looping over the file object. Since there is a newline in each line of file and the print function adds its own newline each time we call it, so we will end up with two newline characters at the end of each line: one from the file and one from <code>print()</code>. Using <code>strip()</code> on each line in the <code>print()</code> call eliminates these extra blank lines.</p>
</section>
<section id="making-a-list-of-lines-from-a-file" class="level3" data-number="8.1.4">
<h3 data-number="8.1.4" class="anchored" data-anchor-id="making-a-list-of-lines-from-a-file"><span class="header-section-number">8.1.4</span> Making a List of Lines from a File</h3>
<p>When you use <code>with</code>, <strong>the file object returned by <code>open()</code> is only available inside the with block that contains it</strong>. If you want to retain access to a file’s contents outside the <code>with</code> block, you can store the file’s lines in a <code>list</code> inside the block and then work with that <code>list</code>!</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>filename <span class="op">=</span> <span class="st">'pi_digits.txt'</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> file_object:</span>
<span id="cb15-3"><a href="#cb15-3"></a>    lines <span class="op">=</span> file_object.readlines()</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="bu">print</span>(lines) <span class="co"># List of strings</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>pi_string <span class="op">=</span> <span class="st">''</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb15-8"><a href="#cb15-8"></a>    pi_string <span class="op">+=</span> line.strip()</span>
<span id="cb15-9"><a href="#cb15-9"></a>    </span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="bu">print</span>(pi_string)</span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="bu">print</span>(<span class="bu">len</span>(pi_string)) <span class="co"># The string is 32 characters long because it also includes the leading 3 and a decimal point</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['3.1415926535\n', '  8979323846\n', '  2643383279\n']
3.141592653589793238462643383279
32</code></pre>
</div>
</div>
<p>The <code>readlines()</code> method takes each line from the file and stores it in a list. This list is then assigned to <code>lines</code>, which we can continue to work with after the <code>with</code> block ends. Here, we create a variable, <code>pi_string</code>, to hold the digits of pi. We then create a loop that adds each line of digits to <code>pi_string</code> and removes the newline character from each line.</p>
<blockquote class="blockquote">
<p>When Python reads from a text file, it interprets all text in the file as a <code>string</code>. If you read in a number and want to work with that value in a numerical context, you’ll have to convert it to an integer using the <code>int()</code> function or convert it to a float using the <code>float()</code> function.</p>
</blockquote>
</section>
<section id="writing-to-a-file" class="level3" data-number="8.1.5">
<h3 data-number="8.1.5" class="anchored" data-anchor-id="writing-to-a-file"><span class="header-section-number">8.1.5</span> Writing to a File</h3>
<p>One of the simplest ways to save data is to write it to a file. When you write text to a file, the output will still be available after you close the terminal containing your program’s output. You can examine output after a program finishes running, and you can share the output files with others as well. You can also write programs that read the text back into memory and work with it again later!</p>
<section id="writing-to-an-empty-file" class="level4" data-number="8.1.5.1">
<h4 data-number="8.1.5.1" class="anchored" data-anchor-id="writing-to-an-empty-file"><span class="header-section-number">8.1.5.1</span> Writing to an Empty File</h4>
<p>To write text to a file, you need to call <code>open()</code> with a second argument telling Python that you want to write to the file</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>filename <span class="op">=</span> <span class="st">'programming.txt'</span></span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'w'</span>) <span class="im">as</span> file_object:</span>
<span id="cb17-4"><a href="#cb17-4"></a>    file_object.write(<span class="st">"We love programming!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The call to <code>open()</code> in this example has two arguments. The first argument is still the name of the file we want to open. The second argument, ‘w’, tells Python that we want to open the file in write mode. You can open a file in read mode (‘r’), write mode (‘w’), append mode (‘a’), or a mode that allows you to read and write to the file ( ‘r+’). If you omit the mode argument, Python opens the file in read-only mode by default. Here, we use the <code>write()</code> method on the file object to write a string to the file.</p>
<blockquote class="blockquote">
<p>Python can only write strings to a text file. If you want to store numerical data in a text file, you’ll have to convert the data to string format first using the <code>str()</code> function.</p>
</blockquote>
<blockquote class="blockquote">
<p>The <code>open()</code> function automatically creates the file you’re writing to if it doesn’t already exist. However, be careful opening a file in write mode (‘w’) because if the file does exist, Python will erase the contents of the file before returning the file object.</p>
</blockquote>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'w'</span>) <span class="im">as</span> file_object:</span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="bu">print</span>(<span class="st">"12"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>12</code></pre>
</div>
</div>
<p>While reading through a file, the system maintains a <strong><em>file-position pointer</em></strong>(index) representing the location of the next character to read. Therefore, the following code snippet will allow you to append it to the end of the file.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>year <span class="op">=</span> <span class="dv">2023</span></span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'r+'</span>) <span class="im">as</span> file_object:</span>
<span id="cb20-4"><a href="#cb20-4"></a>    spam <span class="op">=</span> file_object.readlines()</span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="bu">print</span>(file_object.tell())</span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="bu">print</span>(<span class="bu">len</span>(<span class="st">"We love programming!"</span>))</span>
<span id="cb20-7"><a href="#cb20-7"></a>    file_object.write(<span class="bu">str</span>(year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>20
20</code></pre>
</div>
</div>
<p>The <code>tell()</code> function will return the current position of the file-position pointer. We can also use <code>seek()</code> to change the position. Checkout more details about file-position pointer <a href="https://pynative.com/python-file-seek/">here</a>.</p>
</section>
</section>
<section id="appending-to-a-file" class="level3" data-number="8.1.6">
<h3 data-number="8.1.6" class="anchored" data-anchor-id="appending-to-a-file"><span class="header-section-number">8.1.6</span> Appending to a File</h3>
<p>If you want to add content to a file instead of writing over existing content, you can also open the file in append mode. When you open a file in append mode, Python doesn’t erase the contents of the file before returning the file object. Any lines you write to the file will be added at the end of the file. If the file doesn’t exist yet, Python will create an empty file for you.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>filename <span class="op">=</span> <span class="st">'programming.txt'</span></span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'a'</span>) <span class="im">as</span> file_object:</span>
<span id="cb22-4"><a href="#cb22-4"></a>    file_object.write(<span class="st">"</span><span class="ch">\n</span><span class="st">We also love finding meaning in large datasets.</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb22-5"><a href="#cb22-5"></a>    file_object.write(<span class="st">"We love creating apps that can run in a browser.</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>write()</code> function doesn’t add any newlines to the text you write. So we need to add newline characters if we would like to. There is also a <code>writelines()</code> function that can write list of strings into files.</p>
</section>
</section>
<section id="storing-data" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="storing-data"><span class="header-section-number">8.2</span> Storing Data</h2>
<p>Many of your programs will ask users to input certain kinds of information. You might allow users to store preferences in a game or provide data for visualization. Whatever the focus of your program is, you’ll store the information users provide in data structures such as <code>lists</code> and <code>dictionaries</code>. When users close a program, you’ll almost always want to save the information they entered. A simple way to do this involves storing your data using the <code>json</code> module.</p>
<p>The <code>json</code> module allows you to dump simple Python data structures into a file and load the data from that file the next time the program runs. <strong>You can also use <code>json</code> to share data between different programming languages. It’s a useful and portable format.</strong></p>
<section id="using-json.dump-and-json.load" class="level4" data-number="8.2.0.1">
<h4 data-number="8.2.0.1" class="anchored" data-anchor-id="using-json.dump-and-json.load"><span class="header-section-number">8.2.0.1</span> Using <code>json.dump()</code> and <code>json.load()</code></h4>
<p>The <code>json.dump()</code> function takes two arguments: a piece of data to store and a file object it can use to store the data.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="im">import</span> json</span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>numbers <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">13</span>]</span>
<span id="cb23-4"><a href="#cb23-4"></a>filename <span class="op">=</span> <span class="st">'numbers.json'</span></span>
<span id="cb23-5"><a href="#cb23-5"></a></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb23-7"><a href="#cb23-7"></a>    json.dump(numbers, f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we’ll write a program that uses <code>json.load()</code> to read the list back into memory</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>filename <span class="op">=</span> <span class="st">'numbers.json'</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> f:</span>
<span id="cb24-3"><a href="#cb24-3"></a>    numbers <span class="op">=</span> json.load(f)</span>
<span id="cb24-4"><a href="#cb24-4"></a>    </span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="bu">print</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2, 3, 5, 7, 11, 13]</code></pre>
</div>
</div>
</section>
</section>
<section id="exceptions" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="exceptions"><span class="header-section-number">8.3</span> Exceptions</h2>
<p>Python uses special objects called exceptions to manage errors that arise during a program’s execution. Whenever an error makes Python unsure of what to do next, it creates an <code>exception</code> object. If we write code that handles the exception, the program will continue running. If you don’t handle the exception, the program will halt and show a <strong><em>traceback</em></strong>, which includes a report of the exception that was raised.</p>
<p>Exceptions are handled with <code>try-except</code> blocks. A <code>try-except</code> block tells Python what to do if an exception is raised. When we use <code>try-except</code> blocks, our programs will continue running even if things go wrong. Instead of tracebacks, which can be confusing for users to read, users will see friendly error messages that we write!</p>
<section id="handling-the-zerodivisionerror-exception" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="handling-the-zerodivisionerror-exception"><span class="header-section-number">8.3.1</span> Handling the <code>ZeroDivisionError</code> Exception</h3>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="bu">print</span>(<span class="dv">5</span><span class="op">/</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>ZeroDivisionError: division by zero</code></pre>
</div>
</div>
<p>The error reported at the first line in the traceback, <code>ZeroDivisionError</code>, is an exception object. Python creates this kind of object in response to a situation where it can’t do what we ask. When this happens, Python stops the program and tells us the kind of exception that was raised. We can use this information to modify our program.</p>
<p>When we think an error may occur, you can write a <code>try-except</code> block to handle the exception that might be raised. We tell Python to try running some code and tell it what to do if the code results in a particular kind of exception.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="cf">try</span>:</span>
<span id="cb28-2"><a href="#cb28-2"></a>    <span class="bu">print</span>(<span class="dv">5</span><span class="op">/</span><span class="dv">0</span>)</span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="cf">except</span> <span class="pp">ZeroDivisionError</span>:</span>
<span id="cb28-4"><a href="#cb28-4"></a>    <span class="bu">print</span>(<span class="st">"You can't divide by zero!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>You can't divide by zero!</code></pre>
</div>
</div>
<p>We put <code>print(5/0)</code>, the line that caused the error, inside a <code>try</code> block. If the code in a <code>try</code> block works, Python skips over the <code>except</code> block. If the code in the <code>try</code> block causes an error, Python looks for an <code>except</code> block whose error matches the one that was raised and ran the code in that block. In this example, the user sees a friendly error message instead of a traceback.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a><span class="cf">try</span>:</span>
<span id="cb30-2"><a href="#cb30-2"></a>    <span class="bu">print</span>(<span class="dv">5</span><span class="op">/</span><span class="dv">0</span>)</span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="cf">except</span>:</span>
<span id="cb30-4"><a href="#cb30-4"></a>    <span class="bu">print</span>(<span class="st">"Exceptions occur!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Exceptions occur!</code></pre>
</div>
</div>
<p>If you do not add any exception type, it will capture all exceptions!</p>
</section>
<section id="using-exceptions-to-prevent-crashes" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="using-exceptions-to-prevent-crashes"><span class="header-section-number">8.3.2</span> Using Exceptions to Prevent Crashes</h3>
<p>Handling errors correctly is especially important when the program has more work to do after the error occurs. Let’s create a simple calculator that does only division:</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a><span class="op">%%</span>writefile division_calculator.py</span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="bu">print</span>(<span class="st">"Give me two numbers, and I'll divide them."</span>)</span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="bu">print</span>(<span class="st">"Enter 'q' to quit."</span>)</span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb32-6"><a href="#cb32-6"></a>    first_number <span class="op">=</span> <span class="bu">input</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">First number: "</span>)</span>
<span id="cb32-7"><a href="#cb32-7"></a>    <span class="cf">if</span> first_number <span class="op">==</span> <span class="st">'q'</span>:</span>
<span id="cb32-8"><a href="#cb32-8"></a>        <span class="cf">break</span></span>
<span id="cb32-9"><a href="#cb32-9"></a>    second_number <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Second number: "</span>)</span>
<span id="cb32-10"><a href="#cb32-10"></a>    <span class="cf">if</span> second_number <span class="op">==</span> <span class="st">'q'</span>:</span>
<span id="cb32-11"><a href="#cb32-11"></a>        <span class="cf">break</span></span>
<span id="cb32-12"><a href="#cb32-12"></a>    <span class="cf">try</span>:</span>
<span id="cb32-13"><a href="#cb32-13"></a>        answer <span class="op">=</span> <span class="bu">int</span>(first_number) <span class="op">/</span> <span class="bu">int</span>(second_number)</span>
<span id="cb32-14"><a href="#cb32-14"></a>    <span class="cf">except</span> <span class="pp">ZeroDivisionError</span>:</span>
<span id="cb32-15"><a href="#cb32-15"></a>        <span class="bu">print</span>(<span class="st">"You can't divide by 0!"</span>)</span>
<span id="cb32-16"><a href="#cb32-16"></a>    <span class="cf">else</span>: <span class="co"># Only executed if try block is succeed</span></span>
<span id="cb32-17"><a href="#cb32-17"></a>        <span class="bu">print</span>(answer)</span>
<span id="cb32-18"><a href="#cb32-18"></a>    <span class="cf">finally</span>: <span class="co"># Always executed</span></span>
<span id="cb32-19"><a href="#cb32-19"></a>        <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Give me two numbers, and I'll divide them."</span>)</span>
<span id="cb32-20"><a href="#cb32-20"></a>        <span class="bu">print</span>(<span class="st">"Enter 'q' to quit."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Overwriting division_calculator.py</code></pre>
</div>
</div>
<p>Here, the error may occur on the line that performs the division, so that’s where we’ll put the <code>try-except</code> block. This example also includes an <code>else</code> block. Any code that depends on the <code>try</code> block executing successfully goes into the <code>else</code> block. In addition, the <code>finally</code> clause is guaranteed to execute, regardless of whether its <code>try</code> suite executes successfully or an exception occurs.</p>
<p>We ask Python to try to complete the division operation in a <code>try</code> block, which includes only the code that might cause an error. The program continues to run, and the user never sees a traceback.</p>
</section>
<section id="handling-the-filenotfounderror-exception" class="level3" data-number="8.3.3">
<h3 data-number="8.3.3" class="anchored" data-anchor-id="handling-the-filenotfounderror-exception"><span class="header-section-number">8.3.3</span> Handling the <code>FileNotFoundError</code> Exception</h3>
<p>One common issue when working with files is handling missing files. The file you’re looking for might be in a different location, the filename may be misspelled, or the file may not exist at all</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a>filename <span class="op">=</span> <span class="st">'alice.txt'</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> f: <span class="co"># Note it is in read mode</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>    contents <span class="op">=</span> f.read()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>FileNotFoundError: [Errno 2] No such file or directory: 'alice.txt'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a>filename <span class="op">=</span> <span class="st">'alice.txt'</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="cf">try</span>:</span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> f:</span>
<span id="cb36-4"><a href="#cb36-4"></a>        contents <span class="op">=</span> f.read()</span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb36-6"><a href="#cb36-6"></a>    <span class="bu">print</span>(<span class="ss">f"Sorry, the file </span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss"> does not exist."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sorry, the file alice.txt does not exist.</code></pre>
</div>
</div>
<p>In this example, the code in the <code>try</code> block produces a <code>FileNotFoundError</code>, so Python looks for an <code>except</code> block that matches that error. Python then runs the code in that block, and the result is a friendly error message instead of a traceback.</p>
<blockquote class="blockquote">
<h3 id="exercise-1-assuming-we-are-designing-a-word-game-called-the-mysterious-island-and-we-need-to-load-the-statistics-of-the-player-and-enemies-each-time-the-game-begins.-try-to-complete-the-following-functions-load_data-and-save_data-so-that-you-can-load-the-json-file-if-it-does-not-exist-using-the-exception-handling-techniques-you-just-learned." data-number="8.3.4" class="anchored"><span class="header-section-number">8.3.4</span> Exercise 1: Assuming we are designing a word game called “The Mysterious Island” and we need to load the statistics of the player and enemies each time the game begins. Try to complete the following functions <code>load_data()</code> and <code>save_data()</code> so that you can load the JSON file if it does not exist using the exception handling techniques you just learned.</h3>
</blockquote>
<center>
<img src="https://cdn.leonardo.ai/users/f26a2ba8-8273-45e9-8db9-958f83058486/generations/905d6875-67b0-4960-8ff9-bb18e1fda05a/Leonardo_Creative_As_you_venture_deeper_into_the_dark_damp_cav_1.jpg">
</center>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a><span class="im">import</span> random</span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="im">import</span> time</span>
<span id="cb38-3"><a href="#cb38-3"></a></span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="kw">def</span> slow_print(text, delay<span class="op">=</span><span class="fl">0.05</span>):</span>
<span id="cb38-5"><a href="#cb38-5"></a>    <span class="cf">for</span> char <span class="kw">in</span> text:</span>
<span id="cb38-6"><a href="#cb38-6"></a>        <span class="bu">print</span>(char, end<span class="op">=</span><span class="st">''</span>, flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb38-7"><a href="#cb38-7"></a>        time.sleep(delay)</span>
<span id="cb38-8"><a href="#cb38-8"></a>    <span class="bu">print</span>()</span>
<span id="cb38-9"><a href="#cb38-9"></a></span>
<span id="cb38-10"><a href="#cb38-10"></a><span class="kw">def</span> battle(player, enemy):</span>
<span id="cb38-11"><a href="#cb38-11"></a>    slow_print(<span class="ss">f"You encounter a </span><span class="sc">{</span>enemy[<span class="st">'name'</span>]<span class="sc">}</span><span class="ss"> with </span><span class="sc">{</span>enemy[<span class="st">'hp'</span>]<span class="sc">}</span><span class="ss"> HP!"</span>)</span>
<span id="cb38-12"><a href="#cb38-12"></a>    <span class="cf">while</span> player[<span class="st">'hp'</span>] <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> enemy[<span class="st">'hp'</span>] <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb38-13"><a href="#cb38-13"></a>        choice <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Do you want to attack or escape? (a/e): "</span>)</span>
<span id="cb38-14"><a href="#cb38-14"></a>        <span class="cf">if</span> choice.lower() <span class="op">==</span> <span class="st">'a'</span>:</span>
<span id="cb38-15"><a href="#cb38-15"></a>            player_damage <span class="op">=</span> <span class="bu">max</span>(random.randint(player[<span class="st">'attack'</span>]<span class="op">//</span><span class="dv">2</span>, player[<span class="st">'attack'</span>]), <span class="dv">1</span>)</span>
<span id="cb38-16"><a href="#cb38-16"></a>            enemy_damage <span class="op">=</span> <span class="bu">max</span>(random.randint(enemy[<span class="st">'attack'</span>]<span class="op">//</span><span class="dv">2</span>, enemy[<span class="st">'attack'</span>]), <span class="dv">1</span>)</span>
<span id="cb38-17"><a href="#cb38-17"></a>            slow_print(<span class="ss">f"You deal </span><span class="sc">{</span>player_damage<span class="sc">}</span><span class="ss"> damage to the </span><span class="sc">{</span>enemy[<span class="st">'name'</span>]<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb38-18"><a href="#cb38-18"></a>            enemy[<span class="st">'hp'</span>] <span class="op">-=</span> player_damage</span>
<span id="cb38-19"><a href="#cb38-19"></a>            <span class="cf">if</span> enemy[<span class="st">'hp'</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb38-20"><a href="#cb38-20"></a>                <span class="cf">break</span></span>
<span id="cb38-21"><a href="#cb38-21"></a>            slow_print(<span class="ss">f"The </span><span class="sc">{</span>enemy[<span class="st">'name'</span>]<span class="sc">}</span><span class="ss"> deals </span><span class="sc">{</span>enemy_damage<span class="sc">}</span><span class="ss"> damage to you!"</span>)</span>
<span id="cb38-22"><a href="#cb38-22"></a>            player[<span class="st">'hp'</span>] <span class="op">-=</span> enemy_damage</span>
<span id="cb38-23"><a href="#cb38-23"></a>        <span class="cf">elif</span> choice.lower() <span class="op">==</span> <span class="st">'e'</span>:</span>
<span id="cb38-24"><a href="#cb38-24"></a>            escape_chance <span class="op">=</span> random.randint(<span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb38-25"><a href="#cb38-25"></a>            <span class="cf">if</span> escape_chance <span class="op">&lt;=</span> <span class="dv">2</span>:</span>
<span id="cb38-26"><a href="#cb38-26"></a>                slow_print(<span class="st">"You successfully escape from the battle!"</span>)</span>
<span id="cb38-27"><a href="#cb38-27"></a>                <span class="cf">return</span></span>
<span id="cb38-28"><a href="#cb38-28"></a>            <span class="cf">else</span>:</span>
<span id="cb38-29"><a href="#cb38-29"></a>                slow_print(<span class="st">"You failed to escape!"</span>)</span>
<span id="cb38-30"><a href="#cb38-30"></a>                enemy_damage <span class="op">=</span> <span class="bu">max</span>(random.randint(enemy[<span class="st">'attack'</span>]<span class="op">//</span><span class="dv">2</span>, enemy[<span class="st">'attack'</span>]), <span class="dv">1</span>)</span>
<span id="cb38-31"><a href="#cb38-31"></a>                slow_print(<span class="ss">f"The </span><span class="sc">{</span>enemy[<span class="st">'name'</span>]<span class="sc">}</span><span class="ss"> deals </span><span class="sc">{</span>enemy_damage<span class="sc">}</span><span class="ss"> damage to you!"</span>)</span>
<span id="cb38-32"><a href="#cb38-32"></a>                player[<span class="st">'hp'</span>] <span class="op">-=</span> enemy_damage</span>
<span id="cb38-33"><a href="#cb38-33"></a>        <span class="cf">else</span>:</span>
<span id="cb38-34"><a href="#cb38-34"></a>            slow_print(<span class="st">"Invalid choice! Try again."</span>)</span>
<span id="cb38-35"><a href="#cb38-35"></a>    <span class="cf">if</span> player[<span class="st">'hp'</span>] <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb38-36"><a href="#cb38-36"></a>        slow_print(<span class="st">"You were defeated!"</span>)</span>
<span id="cb38-37"><a href="#cb38-37"></a>        <span class="bu">print</span>(<span class="st">"Game over!"</span>)</span>
<span id="cb38-38"><a href="#cb38-38"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb38-39"><a href="#cb38-39"></a>    <span class="cf">else</span>:</span>
<span id="cb38-40"><a href="#cb38-40"></a>        slow_print(<span class="ss">f"You defeated the </span><span class="sc">{</span>enemy[<span class="st">'name'</span>]<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb38-41"><a href="#cb38-41"></a></span>
<span id="cb38-42"><a href="#cb38-42"></a><span class="kw">def</span> load_data():</span>
<span id="cb38-43"><a href="#cb38-43"></a>    <span class="co"># Perform exception handling, if this is the first time you load the game</span></span>
<span id="cb38-44"><a href="#cb38-44"></a>    _____:</span>
<span id="cb38-45"><a href="#cb38-45"></a>        <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'game_data.json'</span>, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb38-46"><a href="#cb38-46"></a>            data <span class="op">=</span> ____________________ <span class="co"># Read the data here using load()</span></span>
<span id="cb38-47"><a href="#cb38-47"></a>    __________________________:</span>
<span id="cb38-48"><a href="#cb38-48"></a>        data <span class="op">=</span> {</span>
<span id="cb38-49"><a href="#cb38-49"></a>            <span class="st">"player"</span>: {</span>
<span id="cb38-50"><a href="#cb38-50"></a>                <span class="st">"name"</span>: <span class="st">"Player"</span>,</span>
<span id="cb38-51"><a href="#cb38-51"></a>                <span class="st">"hp"</span>: <span class="dv">50</span>,</span>
<span id="cb38-52"><a href="#cb38-52"></a>                <span class="st">"attack"</span>: <span class="dv">10</span></span>
<span id="cb38-53"><a href="#cb38-53"></a>            },</span>
<span id="cb38-54"><a href="#cb38-54"></a>            <span class="st">"enemies"</span>: [</span>
<span id="cb38-55"><a href="#cb38-55"></a>                {</span>
<span id="cb38-56"><a href="#cb38-56"></a>                    <span class="st">"name"</span>: <span class="st">"Slime"</span>,</span>
<span id="cb38-57"><a href="#cb38-57"></a>                    <span class="st">"hp"</span>: <span class="dv">10</span>,</span>
<span id="cb38-58"><a href="#cb38-58"></a>                    <span class="st">"attack"</span>: <span class="dv">5</span></span>
<span id="cb38-59"><a href="#cb38-59"></a>                },</span>
<span id="cb38-60"><a href="#cb38-60"></a>                {</span>
<span id="cb38-61"><a href="#cb38-61"></a>                    <span class="st">"name"</span>: <span class="st">"Goblin"</span>,</span>
<span id="cb38-62"><a href="#cb38-62"></a>                    <span class="st">"hp"</span>: <span class="dv">25</span>,</span>
<span id="cb38-63"><a href="#cb38-63"></a>                    <span class="st">"attack"</span>: <span class="dv">8</span></span>
<span id="cb38-64"><a href="#cb38-64"></a>                },</span>
<span id="cb38-65"><a href="#cb38-65"></a>                {</span>
<span id="cb38-66"><a href="#cb38-66"></a>                    <span class="st">"name"</span>: <span class="st">"Dragon"</span>,</span>
<span id="cb38-67"><a href="#cb38-67"></a>                    <span class="st">"hp"</span>: <span class="dv">80</span>,</span>
<span id="cb38-68"><a href="#cb38-68"></a>                    <span class="st">"attack"</span>: <span class="dv">15</span></span>
<span id="cb38-69"><a href="#cb38-69"></a>                }</span>
<span id="cb38-70"><a href="#cb38-70"></a>            ]</span>
<span id="cb38-71"><a href="#cb38-71"></a>        }</span>
<span id="cb38-72"><a href="#cb38-72"></a>        save_data(data)</span>
<span id="cb38-73"><a href="#cb38-73"></a>    <span class="cf">return</span> data</span>
<span id="cb38-74"><a href="#cb38-74"></a></span>
<span id="cb38-75"><a href="#cb38-75"></a><span class="kw">def</span> save_data(data):</span>
<span id="cb38-76"><a href="#cb38-76"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">'game_data.json'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb38-77"><a href="#cb38-77"></a>        ______________<span class="co"># Save the data so that you can play again using dump()</span></span>
<span id="cb38-78"><a href="#cb38-78"></a></span>
<span id="cb38-79"><a href="#cb38-79"></a>data <span class="op">=</span> load_data()</span>
<span id="cb38-80"><a href="#cb38-80"></a>player <span class="op">=</span> data[<span class="st">'player'</span>]</span>
<span id="cb38-81"><a href="#cb38-81"></a>enemies <span class="op">=</span> data[<span class="st">'enemies'</span>]</span>
<span id="cb38-82"><a href="#cb38-82"></a>flag <span class="op">=</span> <span class="va">True</span></span>
<span id="cb38-83"><a href="#cb38-83"></a></span>
<span id="cb38-84"><a href="#cb38-84"></a><span class="cf">for</span> enemy <span class="kw">in</span> enemies:</span>
<span id="cb38-85"><a href="#cb38-85"></a>    flag <span class="op">=</span> battle(player, enemy)</span>
<span id="cb38-86"><a href="#cb38-86"></a></span>
<span id="cb38-87"><a href="#cb38-87"></a><span class="cf">if</span> flag <span class="op">!=</span> <span class="va">False</span>: </span>
<span id="cb38-88"><a href="#cb38-88"></a>    <span class="bu">print</span>(<span class="st">"Congratulations!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>You encounter a Slime with 10 HP!
You deal 7 damage to the Slime!
The Slime deals 2 damage to you!
Invalid choice! Try again.
You deal 9 damage to the Slime!
You defeated the Slime!
You encounter a Goblin with 25 HP!
You deal 6 damage to the Goblin!
The Goblin deals 8 damage to you!
You deal 7 damage to the Goblin!
The Goblin deals 5 damage to you!
You deal 7 damage to the Goblin!
The Goblin deals 4 damage to you!
You deal 10 damage to the Goblin!
You defeated the Goblin!
You encounter a Dragon with 80 HP!
You failed to escape!
The Dragon deals 13 damage to you!
You failed to escape!
The Dragon deals 9 damage to you!
You failed to escape!
The Dragon deals 15 damage to you!
You were defeated!
Game over!</code></pre>
</div>
</div>
<p>In this chapter, you learned how to work with files. You learned to read an entire file at once and read through a file’s contents one line at a time. You learned to write to a file and append text onto the end of a file. You learned how to store Python data structures so you can save information your users provide, preventing them from having to start over each time they run a program. Finally, You read about exceptions and how to handle the exceptions you’re likely to see in your programs.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./06_Manipulating_string.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulating Strings</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./08_09_OOP.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Object Oriented Programming and Classes</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>